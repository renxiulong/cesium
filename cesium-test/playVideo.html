<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Use correct character set. -->
  <meta charset="utf-8">
  <!-- Tell IE to use the latest, best version. -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!-- Make the application on mobile take up the full browser screen and disable user scaling. -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
  <title>Hello World!</title>
  <script src="Build/Cesium/Cesium.js"></script>
  <style>
      @import url(Build/Cesium/Widgets/widgets.css);
      html, body, #cesiumContainer {
          width: 100%; height: 100%; margin: 0; padding: 0; overflow: hidden;
      }
	  .cesium-widget-credits{ display:none} /**  隐藏版权信息 **/
	  .cesium-viewer .cesium-widget-credits{ display:none }
  </style>
</head>
<body>
  <div id="cesiumContainer"></div>
  <video id="trailer" muted autoplay loop crossorigin controls>
  <!--<video id="trailer" style="display: none;" autoplay="autoplay">-->
		<source src="video.mp4" type="video/mp4">
		Your browser does not support the <code>video</code> element.
	</video>
  <script>
    var viewer = new Cesium.Viewer('cesiumContainer', {
		geocoder: false,//是否显示geocoder小器件，右上角查询按钮
		homeButton:false,//是否显示Home按钮
		sceneModePicker:false,//是否显示3D/2D选择器
		baseLayerPicker:false,//是否显示图层选择器
		navigationHelpButton:false,//是否显示右上角的帮助按钮
		animation:false,//是否创建动画小器件，左下角仪表
		creditContainer:"cesiumContainer",// 对应上面div的ID
		timeline:false,//是否显示时间轴
		fullscreenButtion:false,//是否显示全屏按钮
		vrButton:false,
		selectionIndicator : false,//是否显示选取指示器组件
	});
	// 上面配置选项可以控制部分控件是否显示
	viewer.scene.debugShowFramesPerSecond = true;// 显示帧率
	/** 默认使用bing地图，转换为google地图开始 **/
	var google = new Cesium.UrlTemplateImageryProvider({
		//url : 'http://mt0.google.cn/vt/lyrs=s&hl=zh-CN&x={x}&y={y}&z={z}',
		url : 'http://mt0.google.cn/vt/lyrs=s&hl=zh-CN&x={x}&y={y}&z={z}',
		tilingScheme : new Cesium.WebMercatorTilingScheme(),
		maximumLevel : 20
	});
	viewer.imageryLayers.addImageryProvider(google);
	/** 默认使用bing地图，转换为google地图结束 **/
	/** 开始添加立方体开始 ***/
	var videoElement = document.getElementById('trailer');//获得video对象
	videoElement.play();
	var redBox = viewer.entities.add({
		name: 'my first box',
		position: Cesium.Cartesian3.fromDegrees(116.812167,36.550532, 1.0),
		box: {
			dimensions : new Cesium.Cartesian3(10.0, 0.1, 10.0),
			material: Cesium.Color.RED.withAlpha(0.5),
			outline: true,
			outlineColor: Cesium.Color.BLACK,
			material: videoElement,
		}
	});
	
	viewer.zoomTo(viewer.entities);
	
	/** 开始添加立方体结束 ***/
	/** **/
	
	/** 放置航拍模型开始 ***/
	var tileset = new Cesium.Cesium3DTileset({
		url: 'Scene/Production_1.json',
	});
	var city = viewer.scene.primitives.add(tileset);// 模型没有正确放置在地面上，需要通过以下函数来调整修复
	var heightOffset = -32;
	city.readyPromise.then(function(tileset) {
		// Position tileset
		var boundingSphere = tileset.boundingSphere;
		var cartographic = Cesium.Cartographic.fromCartesian(boundingSphere.center);
		var surface = Cesium.Cartesian3.fromRadians(cartographic.longitude, cartographic.latitude, 0.0);
		var offset = Cesium.Cartesian3.fromRadians(cartographic.longitude, cartographic.latitude, heightOffset);
		var translation = Cesium.Cartesian3.subtract(offset, surface, new Cesium.Cartesian3());
		tileset.modelMatrix = Cesium.Matrix4.fromTranslation(translation);
	});
	/** 放置航拍模型结束 ***/
  </script>
</body>
</html>
